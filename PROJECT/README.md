## Проектирование сети ЦОД на базе VXLAN/EVPN для предоставления услуг по передаче трафика в системы хранения содержимого


### Цель проектирования: спроектировать сеть передачи трафика в системы хранения содержимого. Предусмотреть:
#### 1. предусмотреть возможность дальнейшего расширения сети
#### 2. предусмотреть связь географически разнесенных мест размещения оборудования
#### 3. предусмотреть возможность миграции как источников контента, так и устройств хранения контента между различными автозалами
#### 4. предусмотреть возможность роста сети путем добавления пар "источник - хранилище" с изоляцией трафика от ранее установленных пар

В качестве основы нашей сети будем использовать топологию на основе сетей Клоза. Источники контента мы будем подключать к левой части сети, к коммутаторам LSW, хранилище контента будет справа, коммутаторы BLSW. Основное оборудование подключается к паре коммутаторов, третий коммутатор BLSW будет демонстрировать возможность миграции оборудования между автозалами.

Начинаем нашу сеть с плана IP адресации

Сначала организуем стык LSW со спайнами SSW. Сети используем с маской /31, не забываем про возможную суммаризацию сетей. Сети с нулевым третьим октетом выбраны для связи LSW-SSW

|Node|Интерфейс|Адрес|-|Адрес|Интерфейс|Node|
|-|-|-|-|-|-|-|
|LSW1|Ethernet1|10.0.0.0|-|10.0.0.1|Ethernet1|SSW1|
|LSW1|Ethernet2|10.1.0.0|-|10.1.0.1|Ethernet1|SSW2|
|LSW2|Ethernet1|10.2.0.0|-|10.2.0.1|Ethernet1|SSW1|
|LSW2|Ethernet2|10.3.0.0|-|10.3.0.1|Ethernet1|SSW2|

Далее - SSW с BLSW. Для их связи выбраны сети с третьим октетом, раным единице

|Node|Интерфейс|Адрес|-|Адрес|Интерфейс|Node|
|-|-|-|-|-|-|-|
|SSW1|Ethernet1|10.0.1.0|-|10.0.1.1|Ethernet1|BLSW1|
|SSW1|Ethernet2|10.1.1.0|-|10.1.1.1|Ethernet1|BLSW2|
|SSW2|Ethernet1|10.2.1.0|-|10.2.1.1|Ethernet1|BLSW1|
|SSW2|Ethernet2|10.3.1.0|-|10.3.1.1|Ethernet1|BLSW2|

Стык с BLSW3 (условный отдельный автозал)

|Node|Интерфейс|Адрес|-|Адрес|Интерфейс|Node|
|-|-|-|-|-|-|-|
|SSW1|Ethernet1|10.4.1.0|-|10.4.1.1|Ethernet1|BLSW3|
|SSW2|Ethernet1|10.5.1.0|-|10.5.1.1|Ethernet1|BLSW3|

Интерфейсы объявляются как тока-точка. Настройка портов будет выглядеть так:

    interface Ethernet1
       no switchport
       ip address 10.0.0.0/31
       ip ospf network point-to-point

Далее - очередь loopback интерфейсов, на которых мы будем строить underlay сеть и overlay сеть. Здесь суммаризация не требуется, поэтому делаем просто запоминающиеся адреса. Роли коммутаторов будут отличаться вторым октетом адреса. Адреса используем с маской /32

|hostname|ip|	|hostname|ip|	|hostname|ip|
|-|-|-|-|-|-|-|-|
|LSW1|10.100.0.1|	|SSW1|10.101.0.1|	|BLSW1|10.102.0.1|
|LSW2|10.100.0.2|	|SSW1|10.101.0.2|	|BLSW1|10.102.0.2|
| | |	| | |	|BLSW3|10.102.0.3|
